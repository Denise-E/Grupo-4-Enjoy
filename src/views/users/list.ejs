<%- include("../partials/head")  %> 

<body>
    <%- include("../partials/header")  %>

    <main>
    <h1>Usuarios:</h1> 
    <article class="users">
    
    <% users.forEach(element => { %>
        <div class="cadaUsuario">
        <a href="/users/<%= element.id %> ">
            <h3 class="nombres"><%= element.firstName %> <%= element.lastName  %></h3>
        </a>
        <p class="email"> <%= element.email %> </p>
        <% if (element.isAdmin == true) { %>
            <p class="administrador"> es administrador</p>
           <% } %> 
        <% if (element.isActive == true && element.isAdmin == false) { %>
            <p class="actividad">este usuario esta activo</p>
           <% } %>
        

        
           <% if (element.File != null) { %>
           <picture class= "imagenUsuario"></picture>
               <img class= "foto" src= "/uploads/<%=element.File.url %>">
           </picture>
           <% } else { %> 
            <picture class= "imagenUsuario"></picture>
            <img class= "foto"src= "/uploads/default.png">
        </picture>
        <% } %>
        

        <section class="iconos">
        
            <script>
                // Confirmacion eliminaci√≥n ususarios
                function confirmDelete() {
                  let confirmDelete = confirm("Seguro que quiere eliminar este usuario ?");
                  if (confirmDelete) {
                    alert("Usuario eliminado");
                  } else {
                    event.preventDefault();
                  }
                }
            </script>

        <form action="/users/delete/?m=DELETE" method="post">
            <input type="hidden" name="id" value="<%= element.id %>">
            <button type="submit" class="deleteButton" onclick="confirmDelete()"><i class="fas fa-trash"></i></button>
        </form>
        
    </section>
    </div> 
    <% }) %>
 
</article>
</main>

    <%- include("../partials/footer")  %>

</body>
</html>